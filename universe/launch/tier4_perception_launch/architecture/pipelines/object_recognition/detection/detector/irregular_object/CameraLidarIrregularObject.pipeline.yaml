name: CameraLidarIrregularObject.pipeline

depends:
  - CropBoxFilter.module
  - ScanGroundFilter.module
  - RoiPointCloudFusion.module
  - ShapeEstimation.module
  - DetectedObjectFeatureRemover.module

nodes:
  - node: crop_box_filter
    element: CropBoxFilter.module
  - node: ground_filter
    element: ScanGroundFilter.module
  - node: roi_pointcloud_fusion
    element: RoiPointCloudFusion.module
  - node: shape_estimation
    element: ShapeEstimation.module
  - node: detected_object_feature_remover
    element: DetectedObjectFeatureRemover.module

external_interfaces:
  input:
    - name: pointcloud
    - name: rois0
    - name: rois1
    - name: rois2
    - name: rois3
    - name: camera_info0
    - name: camera_info1
    - name: camera_info2
    - name: camera_info3
  output:
    - name: objects
  parameter: []

connections:
  - from: input.pointcloud
    to: crop_box_filter.input.input
  - from: crop_box_filter.output.output
    to: ground_filter.input.pointcloud
  - from: ground_filter.output.pointcloud
    to: roi_pointcloud_fusion.input.pointcloud

  - from: input.rois*
    to: roi_pointcloud_fusion.input.rois*
  - from: input.camera_info*
    to: roi_pointcloud_fusion.input.camera_info*

  - from: roi_pointcloud_fusion.output.clusters
    to: shape_estimation.input.objects
  - from: shape_estimation.output.objects
    to: detected_object_feature_remover.input.input
  - from: detected_object_feature_remover.output.output
    to: output.objects


