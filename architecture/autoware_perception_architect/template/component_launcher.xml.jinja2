<?xml version="1.0"?>
<launch>
  <!-- This launch file is auto-generated by the autoware_architect -->
  <!-- Component Launcher: {{ namespace }} -->
  <!-- Compute Unit: {{ compute_unit }} -->
  <!-- This launcher starts all modules in component: {{ namespace }} -->

{% for module in modules %}
  <!-- Module: {{ module.full_namespace_path }}/{{ module.name }} -->
{% if module.namespace_groups %}
{% for ns_group in module.namespace_groups %}
  <group>
    <push-ros-namespace namespace="{{ ns_group }}"/>
{% endfor %}
{% endif %}
  <load_composable_node target="{{ module.container }}">
    <composable_node pkg="{{ module.package }}" plugin="{{ module.plugin }}" name="{{ module.name }}">
      <!-- Remap input and output topics -->
{% for port in module.ports %}
      <remap from="~/{{ port.direction }}/{{ port.name }}" to="{{ port.topic }}"/>
{% endfor %}

      <!-- Parameters -->
{% for param in module.parameters %}
      <param name="{{ param.name }}" value="{{ param.value }}"/>
{% endfor %}

      <!-- Configurations -->
{% for config in module.configurations %}
      <param name="{{ config.name }}" value="{{ config.value }}"/>
{% endfor %}
    </composable_node>
  </load_composable_node>
{% if module.namespace_groups %}
{% for ns_group in module.namespace_groups %}
  </group>
{% endfor %}
{% endif %}

{% endfor %}
</launch>