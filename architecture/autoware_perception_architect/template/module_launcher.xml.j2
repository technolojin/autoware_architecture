<?xml version="1.0"?>
<!-- This file is auto-generated by the perception architecture -->
<launch>
  <arg name="node_name" default="{{ node_name }}"/>

  <!-- Interface -->
{% for input_item in inputs %}
  <arg name="input/{{ input_item.name }}" default="{{ input_item.name }}"/>
{% endfor %}
{% for output_item in outputs %}
  <arg name="output/{{ output_item.name }}" default="{{ output_item.name }}"/>
{% endfor %}

  <!-- Parameter file paths -->
{% for param_path in parameters %}
  <arg name="{{ param_path.name }}" default="{{ param_path.default }}"/>
{% endfor %}

  <!-- Configuration -->
{% for configuration in configurations %}
{% if configuration.type == "bool" %}
  <arg name="{{ configuration.name }}" default="{{ configuration.default|lower }}"/>
{% else %}
  <arg name="{{ configuration.name }}" default="{{ configuration.default }}"/>
{% endif %}
{% endfor %}

{% if use_container %}
  <load_composable_node target="{{ container_name }}">
    <composable_node pkg="{{ package_name }}" plugin="{{ plugin_name }}" name="${node_name}">
      <!-- Remap input and output topics -->
{% for input_item in inputs %}
      <remap from="~/input/{{ input_item.name }}" to="$(var input/{{ input_item.name }})"/>
{% endfor %}
{% for output_item in outputs %}
      <remap from="~/output/{{ output_item.name }}" to="$(var output/{{ output_item.name }})"/>
{% endfor %}
      <!-- Parameters -->
{% for param_path in parameters %}
      <param from="$(var {{ param_path.name }})" allow_substs="{{ param_path.allow_substs|default('false')|lower }}"/>
{% endfor %}
      <!-- Configurations -->
{% for configuration in configurations %}
      <param name="{{ configuration.name }}" value="$(var {{ configuration.name }})"/>
{% endfor %}
    </composable_node>
  </load_composable_node>
{% else %}
  <node pkg="{{ package_name }}" exec="{{ executable_name }}" name="${node_name}" output="{{ node_output }}">
    <!-- Remap input and output topics -->
{% for input_item in inputs %}
    <remap from="~/input/{{ input_item.name }}" to="$(var input/{{ input_item.name }})"/>
{% endfor %}
{% for output_item in outputs %}
    <remap from="~/output/{{ output_item.name }}" to="$(var output/{{ output_item.name }})"/>
{% endfor %}
    <!-- Parameters -->
{% for param_path in parameters %}
    <param from="$(var {{ param_path.name }})" allow_substs="{{ param_path.allow_substs|default('false')|lower }}"/>
{% endfor %}
    <!-- Configurations -->
{% for configuration in configurations %}
    <param name="{{ configuration.name }}" value="$(var {{ configuration.name }})"/>
{% endfor %}
  </node>
{% endif %}
</launch>
